--- configure	2010-01-07 12:09:40.000000000 -0800
+++ configure	2011-05-02 12:02:33.178294309 -0700
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /bin/bash
 # From configure.in Revision.
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.61 for GNU MP 4.3.2.
@@ -63,7 +63,7 @@
 
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
@@ -575,7 +575,7 @@
 
 
 # Check that we are running under the correct shell.
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/bin/bash}
 
 case X$ECHO in
 X*--fallback-echo)
@@ -660,7 +660,7 @@
     elif (test -f /bin/ksh || test -f /bin/ksh$ac_exeext) &&
 	 test "X$CONFIG_SHELL" != X/bin/ksh; then
       # If we have ksh, try running configure again with it.
-      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
+      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/bash}
       export ORIGINAL_CONFIG_SHELL
       CONFIG_SHELL=/bin/ksh
       export CONFIG_SHELL
@@ -702,7 +702,7 @@
 	if test "$prev" != 'sed 50q "$0"'; then
 	  echo_test_string=`eval $prev`
 	  export echo_test_string
-	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "$0" ${1+"$@"}
+	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/bash}} "$0" ${1+"$@"}
 	else
 	  # Oops.  We lost completely, so just stick with echo.
 	  echo=echo
@@ -745,7 +745,7 @@
 subdirs=
 MFLAGS=
 MAKEFLAGS=
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/bin/bash}
 
 # Identity of this package.
 PACKAGE_NAME='GNU MP'
@@ -2424,7 +2424,7 @@
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.make <<\_ACEOF
-SHELL = /bin/sh
+SHELL = /bin/bash
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
@@ -2997,7 +2997,7 @@
 
 
 # abilist needs to be non-empty, "standard" is just a generic name here
-abilist="standard"
+abilist="64 32"
 
 # FIXME: We'd like to prefer an ANSI compiler, perhaps by preferring
 # c89 over cc here.  But note that on HP-UX c89 provides a castrated
@@ -3739,7 +3739,7 @@
     # reject ABI=64 in favour of ABI=32 if the user has forced the flags to
     # 32-bit mode.
     #
-    abilist="32"
+    abilist="64 32"
     cclist="gcc acc cc"
     any_testlist="sizeof-long-4"
 
@@ -3803,6 +3803,7 @@
     case $host in
       *-*-solaris* | *-*-sunos*)
 	# Note no -g, it disables all optimizations.
+	abilist="64 32"
 	cc_cflags=
 	cc_cflags_optlist="opt arch cpu"
 
@@ -3892,6 +3893,7 @@
             # recurrently caused problems with miscompilation.  Of course,
             # -fast is documented as miscompiling things for the sake of speed.
             #
+	    abilist="64 32"
             cclist_64="$cclist_64 cc"
             cc_64_cflags="-xO3 -xarch=v9"
             cc_64_cflags_optlist="cpu"
@@ -4197,8 +4199,9 @@
 esac
 
 
-CFLAGS_or_unset=${CFLAGS-'(unset)'}
-CPPFLAGS_or_unset=${CPPFLAGS-'(unset)'}
+CFLAGS_or_unset=${CFLAGS}
+CPPFLAGS_or_unset=${CPPFLAGS}
+abilist="64 32"
 
 cat >&5 <<EOF
 User:
@@ -12394,7 +12397,7 @@
       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
     else
-      SHELL=${SHELL-${CONFIG_SHELL-/bin/sh}}
+      SHELL=${SHELL-${CONFIG_SHELL-/bin/bash}}
       while (test "X"`$SHELL $0 --fallback-echo "X$teststring" 2>/dev/null` \
 	       = "XX$teststring") >/dev/null 2>&1 &&
 	      new_result=`expr "X$teststring" : ".*" 2>&1` &&
@@ -16449,7 +16452,7 @@
 EGREP=$lt_EGREP
 
 # The linker used to build libraries.
-LD=$lt_LD
+LD="$LTCC $LTCFLAGS $LDFLAGS"
 
 # Whether we need hard or soft links.
 LN_S=$lt_LN_S
@@ -19523,7 +19526,7 @@
 EGREP=$lt_EGREP
 
 # The linker used to build libraries.
-LD=$lt_LD_CXX
+LD="$CC $CXXFLAGS $LDFLAGS"
 
 # Whether we need hard or soft links.
 LN_S=$lt_LN_S
@@ -27353,11 +27356,17 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "No attribute support for Sun compilers."
+#else
 int foo (int x) __attribute__ ((const));
+#endif
 int
 main ()
 {
-
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "No attribute support for Sun compilers."
+#endif
   ;
   return 0;
 }
@@ -27406,7 +27415,11 @@
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.c <<EOF
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "No attribute support for Sun compilers."
+#else
 void *foo (int x) __attribute__ ((malloc));
+#endif
 EOF
 gmp_compile="$CC $CFLAGS $CPPFLAGS -c conftest.c >conftest.out 2>&1"
 if { (eval echo "$as_me:$LINENO: \"$gmp_compile\"") >&5
@@ -27447,13 +27460,19 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "No attribute support for Sun compilers."
+#else
 typedef int SItype __attribute__ ((mode (SI)));
+#endif
 int
 main ()
 {
-
-  ;
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "No attribute support for Sun compilers."
+#else
   return 0;
+  #endif
 }
 _ACEOF
 rm -f conftest.$ac_objext
@@ -27505,13 +27524,20 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "No attribute support for Sun compilers."
+#else
 void foo (int x) __attribute__ ((noreturn));
+#endif
 int
 main ()
 {
-
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "No attribute support for Sun compilers."
+#else
   ;
   return 0;
+#endif
 }
 _ACEOF
 rm -f conftest.$ac_objext
@@ -34385,7 +34411,7 @@
 
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
