--- nmap-5.21/configure.~1~	2011-01-21 13:00:04.000000000 -0800
+++ nmap-5.21/configure	2011-11-28 14:45:27.152150862 -0800
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /bin/bash
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.66.
 #
@@ -237,7 +237,7 @@
 fi
 fi
 fi
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/bin/bash}
 export SHELL
 # Unset more variables known to interfere with behavior of common tools.
 CLICOLOR_FORCE= GREP_OPTIONS=
@@ -800,7 +800,7 @@
 datadir='${datarootdir}'
 sysconfdir='${prefix}/etc'
 sharedstatedir='${prefix}/com'
-localstatedir='${prefix}/var'
+localstatedir=
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
 docdir='${datarootdir}/doc/${PACKAGE}'
@@ -3985,7 +3985,7 @@
   ac_save_cxx_werror_flag=$ac_cxx_werror_flag
    ac_cxx_werror_flag=yes
    ac_cv_prog_cxx_g=no
-   CXXFLAGS="-g"
+   CXXFLAGS="$CXXFLAGS"
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -4000,7 +4000,7 @@
 if ac_fn_cxx_try_compile "$LINENO"; then :
   ac_cv_prog_cxx_g=yes
 else
-  CXXFLAGS=""
+  CXXFLAGS="CXXFLAGS"
       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -4016,7 +4016,7 @@
 
 else
   ac_cxx_werror_flag=$ac_save_cxx_werror_flag
-	 CXXFLAGS="-g"
+	 CXXFLAGS="CXXFLAGS"
 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -4044,15 +4044,15 @@
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="$CXXFLAGS"
   else
-    CXXFLAGS="-g"
+    CXXFLAGS="$CXXFLAGS"
   fi
 else
   if test "$GXX" = yes; then
-    CXXFLAGS="-O2"
+    CXXFLAGS="$CXXFLAGS"
   else
-    CXXFLAGS=
+    CXXFLAGS="$CXXFLAGS"
   fi
 fi
 ac_ext=c
@@ -4250,7 +4250,7 @@
 if test -n "$GXX"; then
   # -fno-strict-aliasing disables strict-aliasing optimizations that assume
   # that pointers of different types never point to the same object.
-  CXXFLAGS="$CXXFLAGS -Wall -fno-strict-aliasing"
+  CXXFLAGS="$CXXFLAGS"
 fi
 
 # Remember that all following tests will run with this CXXFLAGS by default
@@ -5687,8 +5687,7 @@
      else
        am_py_prefix=$prefix
      fi
-     am_cv_python_pythondir=`$PYTHON -c "import sys; from distutils import sysconfig; sys.stdout.write(sysconfig.get_python_lib(0,0,prefix='$am_py_prefix'))" 2>/dev/null ||
-     echo "$PYTHON_PREFIX/lib/python$PYTHON_VERSION/site-packages"`
+     am_cv_python_pythondir="$PYTHON_PREFIX/lib/python$PYTHON_VERSION/site-packages"
      case $am_cv_python_pythondir in
      $am_py_prefix*)
        am__strip_prefix=`echo "$am_py_prefix" | sed 's|.|.|g'`
@@ -5717,8 +5716,7 @@
      else
        am_py_exec_prefix=$exec_prefix
      fi
-     am_cv_python_pyexecdir=`$PYTHON -c "import sys; from distutils import sysconfig; sys.stdout.write(sysconfig.get_python_lib(1,0,prefix='$am_py_exec_prefix'))" 2>/dev/null ||
-     echo "$PYTHON_EXEC_PREFIX/lib/python$PYTHON_VERSION/site-packages"`
+     am_cv_python_pyexecdir="$PYTHON_EXEC_PREFIX/lib/python$PYTHON_VERSION/site-packages"
      case $am_cv_python_pyexecdir in
      $am_py_exec_prefix*)
        am__strip_prefix=`echo "$am_py_exec_prefix" | sed 's|.|.|g'`
@@ -6193,7 +6191,7 @@
   if test "${LIBPCAP_INC+set}" = "set"; then
     CPPFLAGS="$CPPFLAGS -I$LIBPCAP_INC"
   else
-    CPPFLAGS="$CPPFLAGS -I\$(top_srcdir)/$libpcapdir"
+    CPPFLAGS="$CPPFLAGS -I$libpcapdir"
   fi
   LIBPCAP_LIBS='$(LIBPCAPDIR)/libpcap.a'
   PCAP_DEPENDS='$(LIBPCAPDIR)/libpcap.a'
@@ -6341,7 +6339,7 @@
 if test $have_pcre != yes ; then
   subdirs="$subdirs libpcre"
 
-  CPPFLAGS="-I\$(top_srcdir)/$LIBPCREDIR $CPPFLAGS"
+  CPPFLAGS="-I$LIBPCREDIR $CPPFLAGS"
   LIBPCRE_LIBS="$LIBPCREDIR/libpcre.a"
   PCRE_DEPENDS="$LIBPCREDIR/libpcre.a"
   PCRE_BUILD="pcre_build"
@@ -6407,9 +6405,9 @@
 if test $have_dnet != yes ; then
   subdirs="$subdirs libdnet-stripped"
 
-  CPPFLAGS="-I\$(top_srcdir)/$LIBDNETDIR/include $CPPFLAGS"
-  LIBDNET_LIBS="\$(top_srcdir)/$LIBDNETDIR/src/.libs/libdnet.a"
-  DNET_DEPENDS="\$(top_srcdir)/$LIBDNETDIR/src/.libs/libdnet.a"
+  CPPFLAGS="-I$LIBDNETDIR/include $CPPFLAGS"
+  LIBDNET_LIBS="$LIBDNETDIR/src/.libs/libdnet.a"
+  DNET_DEPENDS="$LIBDNETDIR/src/.libs/libdnet.a"
   DNET_BUILD="dnet_build"
   DNET_CLEAN="dnet_clean"
   DNET_DIST_CLEAN="dnet_dist_clean"
@@ -6442,9 +6440,9 @@
   yes)
   ;;
   included)
-    CPPFLAGS="-I\$(top_srcdir)/$LIBLUADIR $CPPFLAGS"
-    LIBLUA_LIBS="\$(top_srcdir)/$LIBLUADIR/liblua.a"
-    LUA_DEPENDS="\$(top_srcdir)/$LIBLUADIR/liblua.a"
+    CPPFLAGS="-I$LIBLUADIR $CPPFLAGS"
+    LIBLUA_LIBS="$LIBLUADIR/liblua.a"
+    LUA_DEPENDS="$LIBLUADIR/liblua.a"
     LUA_BUILD="lua_build"
     LUA_CLEAN="lua_clean"
     LUA_DIST_CLEAN="lua_dist_clean"
@@ -6737,9 +6735,9 @@
   if test $have_lua != yes; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-    CPPFLAGS="-I\$(top_srcdir)/$LIBLUADIR $CPPFLAGS"
-    LIBLUA_LIBS="\$(top_srcdir)/$LIBLUADIR/liblua.a"
-    LUA_DEPENDS="\$(top_srcdir)/$LIBLUADIR/liblua.a"
+    CPPFLAGS="-I$LIBLUADIR $CPPFLAGS"
+    LIBLUA_LIBS="\$LIBLUADIR/liblua.a"
+    LUA_DEPENDS="\$LIBLUADIR/liblua.a"
     LUA_BUILD="lua_build"
     LUA_CLEAN="lua_clean"
     LUA_DIST_CLEAN="lua_dist_clean"
@@ -7270,7 +7268,7 @@
 
 
 LDFLAGS="$LDFLAGS -L$NBASEDIR"
-CPPFLAGS="$CPPFLAGS -I\$(top_srcdir)/$NBASEDIR"
+CPPFLAGS="$CPPFLAGS -I$NBASEDIR"
 LIBNBASE_LIBS="-lnbase"
 
 
@@ -7298,7 +7296,7 @@
 
 
 LDFLAGS="$LDFLAGS -L$NSOCKDIR/src/"
-CPPFLAGS="$CPPFLAGS -I\$(top_srcdir)/$NSOCKDIR/include"
+CPPFLAGS="$CPPFLAGS -I$NSOCKDIR/include"
 LIBNSOCK_LIBS="-lnsock"
