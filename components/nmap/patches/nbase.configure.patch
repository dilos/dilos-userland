--- nmap-5.21/nbase/configure.~1~	2011-01-21 13:00:04.000000000 -0800
+++ nmap-5.21/nbase/configure	2011-11-28 14:25:47.655764658 -0800
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /bin/bash
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.66.
 #
@@ -237,7 +237,7 @@
 fi
 fi
 fi
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/bin/bash}
 export SHELL
 # Unset more variables known to interfere with behavior of common tools.
 CLICOLOR_FORCE= GREP_OPTIONS=
@@ -613,7 +613,9 @@
 CPPFLAGS
 LDFLAGS
 CFLAGS
+CXXFLAGS
 CC
+CXX
 target_alias
 host_alias
 build_alias
@@ -663,7 +665,9 @@
 host_alias
 target_alias
 CC
+CXX
 CFLAGS
+CXXFLAGS
 LDFLAGS
 LIBS
 CPPFLAGS
@@ -705,7 +709,7 @@
 datadir='${datarootdir}'
 sysconfdir='${prefix}/etc'
 sharedstatedir='${prefix}/com'
-localstatedir='${prefix}/var'
+localstatedir=
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
 docdir='${datarootdir}/doc/${PACKAGE}'
@@ -3773,6 +3777,10 @@
 
 	#include <stdlib.h>
 
+#if defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+#error "GNU __attribute__ extension not suported "
+#endif
+
 	static void foo(void) __attribute__ ((noreturn));
 
 	static void
